!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("goat",[],e):"object"==typeof exports?exports.goat=e():t.goat=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=/^\s*([!\w\.]+)\s*([^\w\s|&]{1,3})?\s*([^\sˆ&|\\=)]+)?\s*$/,s=/([&|]{2})|([\(\)])|([!\w\.]+)\s*([^\w\s|&]{1,3})?\s*([^\sˆ&|\)]+)?/g,u=/^['"](.*)['"]$/,a=/^\s*([!]+)\s*(\w+)\s*$/,c=["true","false"];e.Goat=function(){function t(e,n){r(this,t),this._expression=e,this._controller=n}return i(t,[{key:"_getRegexMatchArray",value:function(t,e){var n=t.exec(e);if(n)return n=n.filter(function(t){return void 0!==t}),n.shift(),n}},{key:"_evaluateNot",value:function(t,e){var n=void 0;return t.shift(),t.length&&(n=this._evaluateNot(t,e)),this._getOperation("!",n||this._getValue(e))}},{key:"_getValue",value:function(t){var e=void 0;if(e=this._getRegexMatchArray(a,t)){var n=e[0].split("");return this._evaluateNot(n,e[1])}return c.indexOf(t)>-1?"true"===t:t in this._controller?this._getPropertyEval(this._controller,t):isNaN(t)?(e=u.exec(t))?e[1]:t:parseInt(t)}},{key:"_getPropertyEval",value:function(t,e){return function(){return t[e]}}},{key:"_asFunction",value:function(t){return"function"==typeof t?t():t}},{key:"_getOperation",value:function(t,e,n){var r=this;switch(t){case"==":return function(){return r._asFunction(e)==r._asFunction(n)};case"!=":return function(){return r._asFunction(e)!=r._asFunction(n)};case"===":return function(){return r._asFunction(e)===r._asFunction(n)};case"!==":return function(){return r._asFunction(e)!==r._asFunction(n)};case"<=":case"=<":return function(){return r._asFunction(e)<=r._asFunction(n)};case">=":case"=<":return function(){return r._asFunction(e)>=r._asFunction(n)};case"<":return function(){return r._asFunction(e)<r._asFunction(n)};case">":return function(){return r._asFunction(e)>r._asFunction(n)};case"!":return function(){return!r._asFunction(e)};case"&&":return function(){return r._asFunction(e)&&r._asFunction(n)};case"||":return function(){return r._asFunction(e)||r._asFunction(n)}}}},{key:"_processExpression",value:function(t){var e=void 0;if(t instanceof Array||(t=[t]),1===t.length&&(e=this._getRegexMatchArray(o,t[0]))){var n=this._getValue(e[0]),r=this._getValue(e[2]),i=e[1];t[0]="function"!=typeof n||r||i?this._getOperation(e[1],n,r):n}for(;t.length>1||"function"!=typeof t[0];){var s=-1,u=0,a=0,c=void 0,f=void 0,l=t,_=t.lastIndexOf("(");if(_>-1){l=l.slice(_+1,l.length);var p=l.indexOf(")");l=l.slice(0,p);var h=l.length;t[_]=this._processExpression(l),t.splice(_+1,h+1)}else if((s=t.indexOf("&&"))>-1&&")"!==t[u=s-1]&&"("!==t[a=s+1])c=this._processExpression(t[u]),f=this._processExpression(t[a]),t[u]=this._getOperation("&&",c,f),t.splice(s,2);else{if(!((s=t.indexOf("||"))>-1&&")"!==t[u=s-1]&&"("!==t[a=s+1]))break;c=this._processExpression(t[u]),f=this._processExpression(t[a]),t[u]=this._getOperation("||",c,f),t.splice(s,2)}}if(1===t.length)return t[0]}},{key:"_buildEvaluator",value:function(){var t=this._expression.match(s);return s.lastIndex=0,this._processExpression(t)}},{key:"evaluate",value:function(){return this._evaluator||(this._evaluator=this._buildEvaluator()),this._evaluator()}}]),t}()},function(t,e,n){"use strict";n(0);t.exports=ExpressionParser}])});