!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("goat",[],t):"object"==typeof exports?exports.goat=t():n.goat=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=1)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/^\s*([^\sˆ&|\'"\(\)]+|["'][^'"]+["'])\s*$|^\s*([^\sˆ&|\'"\(\)]+|["'][^'"]*["'])\s*([^'"\w\s|&]{1,3})\s*([^\sˆ&|\'"\(\)]+|["'][^'"]*["'])\s*$/,u=/^['"](.*)['"]$/,o=/^\s*([!]+)\s*(\w+)\s*$/,i=["&&","||"],f={},c=function(n){return["true","false"].indexOf(n)>-1},s=function(n){return"function"==typeof n},a=function(n,t){return n.indexOf(t)>-1},l=function(n){return n[Math.round((n.length-1)/2)]},p=function(n){return n.match(/([&|]{2})|([\(\)])|([^\sˆ&|\'"\(\)]+|["'].+["'])\s*([^\w\s|&\(\)]{1,3})?\s*([^\sˆ&|\(\)]+)?/g)},d=function(n){return/^\s*([a-z]\w+)(\.[a-z]\w+)*\s*$/g.test(n)},h=function(n){return s(n)?n():n},v=function(n,t){return n[0]=t},g=function(n){return n[0]},x=function(n,t){var e=n.exec(t)||[];if(0!==e.length)return e=e.filter(function(n){return void 0!==n}),e.shift(),e},_=function(n){return f[n].expression},y=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];throw new Error(n.join(""))},b=function(n,t){return y("Operator ["+n+"] is not valid in expression ["+_(t)+"]")},m=function(n){return y("Invalid expression ["+_(n)+"]")},O=function(n,t,e){return{"==":function(){return h(t)==h(e)},"!=":function(){return h(t)!=h(e)},"===":function(){return h(t)===h(e)},"!==":function(){return h(t)!==h(e)},"<=":function(){return h(t)<=h(e)},">=":function(){return h(t)>=h(e)},"<":function(){return h(t)<h(e)},">":function(){return h(t)>h(e)},"&&":function(){return h(t)&&h(e)},"||":function(){return h(t)||h(e)}}[n]},j=function(n,t,e,r){var u;n.shift(),n.length&&(u=j(n,t,e,r));var o=$(t,e,r);return function(){return!h(u||o)}},w=function(n,t){var e=n[n.length-1];n.pop();var r;return r=t?function(n){return t(n[e])}:function(n){return n[e]},n.length?w(n,r):r},M=function(n,t){var e=f[t].fields;e||(e=f[t].fields=[]),e.push(n)},P=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return!n.every(function(n){return!n()})},$=function(n,t,e){var r;if(r=x(o,n)){return j(r[0].split(""),r[1],t,e)}if(c(n))return"true"===n;if(d(n)){var i=w(n.split("."));return M(n,e),function(){return i(t)}}return isNaN(n)?(r=u.exec(n))?l(r):void m(e):parseInt(n)},k=function(n,t,e,r){var u=-1,o=0,i=0;if((u=t.indexOf(n))>-1&&")"!==t[o=u-1]&&"("!==t[i=u+1]){var f=I(t[o],e,r),c=I(t[i],e,r),s=O(n,g(f),g(c));return t[o]=s,t.splice(u,2),s}},E=function(n,t,e){var r=n,u=n.lastIndexOf("(");if(u>-1){r=r.slice(u+1,r.length);var o=r.indexOf(")");r=r.slice(0,o);var i=r.length,f=I(r,t,e);return n[u]=f,n.splice(u+1,i+1),f}},F=function(n,t,e){var u,o;if(1===n.length&&(u=x(r,g(n)))){var i=$(u[0],t,e),f=u[2];f&&(f=$(u[2],t,e));var c=u[1];return o=!s(i)||f||c?O(u[1],i,f):i,o||b(u[1],e),v(n,o),o}},I=function(n,t,e){return n instanceof Array||(n=[n]),3!==n.length||a(i,l(n))||y("Invalid logical operator ["+l(n)+"] in expression ["+_(e)+"]"),P(function(){return F(n,t,e)},function(){return E(n,t,e)},function(){return k("&&",n,t,e)},function(){return k("||",n,t,e)})||n.length%2!=1||s(g(n))||m(e),n.length>1||!s(g(n))?I(n,t,e):n};t.getFields=function(n){return f[n].fields},t.deleteFromCache=function(n){return delete f[n]},t.generateRandomKey=function(){return Math.floor(72057594037927940*(1+Math.random())).toString(16).substring(1)},t.buildEvaluator=function(n,t,e){var r=p(n)||[];return f[e]={expression:n},r.length%2==0&&m(e),g(I(r,t,e))}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),u=function(){function n(n,t){this._expression=n,this._controller=t,this._parserToken=r.generateRandomKey()}return Object.defineProperty(n.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentEvaluator",{get:function(){return this._evaluator},enumerable:!0,configurable:!0}),n.prototype.evaluate=function(){return this._evaluator||(this._evaluator=r.buildEvaluator(this._expression,this._controller,this._parserToken),this._fields=r.getFields(this._parserToken),r.deleteFromCache(this._parserToken)),this._evaluator()},n}();t.default=u}])});
//# sourceMappingURL=goat.min.js.map