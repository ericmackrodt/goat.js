{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 63ccd9c249a2fc5fb793","webpack:///./src/goat.js","webpack:///./index.js"],"names":["EQUALITY_REGEX","EXPRESSION_REGEX","STRING_REGEX","NOT_REGEX","LOGICAL_OPERATORS","RELATIONAL_OPERATORS","BOOLEANS","Goat","_fields","expression","controller","_expression","_controller","regex","input","match","exec","filter","m","undefined","shift","nots","value","evaluate","length","_evaluateNot","_getOperation","_getValue","field","fields","push","_getRegexMatchArray","split","indexOf","_setField","_getPropertyEval","isNaN","parseInt","obj","prop","val","operation","left","right","_asFunction","Array","index","leftIndex","rightIndex","subExpression","indexLeftParenthesis","lastIndexOf","slice","indexRightParenthesis","expressionLength","_processExpression","splice","lastIndex","_evaluator","_buildEvaluator"],"mappings":"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","file":"goat.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"goat\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"goat\"] = factory();\n\telse\n\t\troot[\"goat\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 63ccd9c249a2fc5fb793","// OLD = /([&|]{2})|([\\(\\)])|([!]+)?([\\w\\.]+)\\s*([^\\w\\s|&]{1,3})?\\s*([^\\sˆ&|\\)]+)?/g;\n\nconst EQUALITY_REGEX = /^\\s*([!\\w\\.]+)\\s*([^\\w\\s|&]{1,3})?\\s*([^\\sˆ&|\\\\=)]+)?\\s*$/;\nconst EXPRESSION_REGEX = /([&|]{2})|([\\(\\)])|([!\\w\\.]+)\\s*([^\\w\\s|&]{1,3})?\\s*([^\\sˆ&|\\)]+)?/g;\nconst STRING_REGEX = /^['\"](.*)['\"]$/;\nconst NOT_REGEX = /^\\s*([!]+)\\s*(\\w+)\\s*$/;\nconst LOGICAL_OPERATORS = ['&&', '||'];\nconst RELATIONAL_OPERATORS = ['==', '!=', '===', '!==', '!', '>=', '<=', '>', '<'];\nconst BOOLEANS = ['true', 'false']; \n\nexport class Goat {\n\n    get fields() {\n        return this._fields;\n    }\n\n    constructor(expression, controller) {\n        this._expression = expression;\n        this._controller = controller;\n    }\n\n    _getRegexMatchArray(regex, input) {\n        let match = regex.exec(input);\n        if (!match) return;\n        match = match.filter(m => m !== undefined);\n        match.shift();\n        return match;\n    }\n\n    _evaluateNot(nots, value) {\n        let evaluate;\n        nots.shift();\n        if (nots.length) {\n            evaluate = this._evaluateNot(nots, value);\n        }\n\n        return this._getOperation('!', evaluate || this._getValue(value));\n    }\n\n    _setField(field) {\n        if (!this._fields) {\n            this._fields = [];\n        }\n        if (typeof field === 'string') {\n            this.fields.push(field);\n        }\n    }\n\n    _getValue(m) {\n        let match;\n        if ((match = this._getRegexMatchArray(NOT_REGEX, m))) {\n            const nots = match[0].split('');\n            return this._evaluateNot(nots, match[1]);\n        } else if (BOOLEANS.indexOf(m) > -1) {\n            return m === 'true';\n        } else if (m in this._controller) {\n            this._setField(m);\n            return this._getPropertyEval(this._controller, m);\n        } else if (!isNaN(m)) {\n            return parseInt(m);\n        } else if ((match = STRING_REGEX.exec(m))) {\n            return match[1];\n        } else {\n            return m;\n        }\n    }\n\n    _getPropertyEval(obj, prop) {\n        return () => obj[prop];\n    }\n\n    _asFunction(val) {\n        if (typeof val === 'function') {\n            return val();\n        } else {\n            return val;\n        }\n    }\n\n    _getOperation(operation, left, right) {\n        switch (operation) {\n            case '==':\n                return () => this._asFunction(left) == this._asFunction(right);\n            case '!=':\n                return () => this._asFunction(left) != this._asFunction(right);\n            case '===':\n                return () => this._asFunction(left) === this._asFunction(right);\n            case '!==':\n                return () => this._asFunction(left) !== this._asFunction(right);\n            case '<=':\n            case '=<':\n                return () => this._asFunction(left) <= this._asFunction(right);\n            case '>=':\n            case '=<':\n                return () => this._asFunction(left) >= this._asFunction(right);\n            case '<':\n                return () => this._asFunction(left) < this._asFunction(right);\n            case '>':\n                return () => this._asFunction(left) > this._asFunction(right);\n            case '!':\n                return () => !this._asFunction(left);\n            case '&&':\n                return () => this._asFunction(left) && this._asFunction(right);\n            case '||':\n                return () => this._asFunction(left) || this._asFunction(right);\n        }\n    }\n\n    _processExpression(expression) {\n        let match;\n        if (!(expression instanceof Array)) {\n            expression = [expression];\n        }\n        if (expression.length === 1 && (match = this._getRegexMatchArray(EQUALITY_REGEX, expression[0]))) {\n            const left = this._getValue(match[0]);\n            const right = this._getValue(match[2]);\n            const operation = match[1];\n            if (typeof left === 'function' && !right && !operation) {\n                expression[0] = left;\n            } else {\n                expression[0] = this._getOperation(match[1], left, right);\n            }\n        }\n\n        while (expression.length > 1 || typeof expression[0] !== 'function') {\n            let index = -1;\n            let leftIndex = 0;\n            let rightIndex = 0;\n            let left;\n            let right;\n\n            let subExpression = expression;\n            const indexLeftParenthesis = expression.lastIndexOf('(');\n            if (indexLeftParenthesis > -1) {\n                subExpression = subExpression.slice(indexLeftParenthesis + 1, subExpression.length);\n                const indexRightParenthesis = subExpression.indexOf(')');\n                subExpression = subExpression.slice(0, indexRightParenthesis);\n                const expressionLength = subExpression.length;\n                expression[indexLeftParenthesis] = this._processExpression(subExpression);\n                expression.splice(indexLeftParenthesis + 1, expressionLength + 1);\n\n                continue;\n            }\n\n\n            if ((index = expression.indexOf('&&')) > -1 && \n                (expression[leftIndex = index - 1] !== ')') &&\n                (expression[rightIndex = index + 1] !== '(')) {\n                // leftIndex = index - 1;\n                // rightIndex = index + 1;\n                left = this._processExpression(expression[leftIndex]);\n                right = this._processExpression(expression[rightIndex]);\n                expression[leftIndex] = this._getOperation('&&', left, right);\n                expression.splice(index, 2);\n\n                continue;\n            } else if ((index = expression.indexOf('||')) > -1 &&\n                (expression[leftIndex = index - 1] !== ')') &&\n                (expression[rightIndex = index + 1] !== '(')) {\n                // leftIndex = index - 1;\n                // rightIndex = index + 1;\n                left = this._processExpression(expression[leftIndex]);\n                right = this._processExpression(expression[rightIndex]);\n                expression[leftIndex] = this._getOperation('||', left, right);\n                expression.splice(index, 2);\n\n                continue;\n            }\n\n            break;\n        }\n\n        if (expression.length === 1) {\n            return expression[0];\n        }\n    }\n\n    _buildEvaluator() {\n        const expression = this._expression.match(EXPRESSION_REGEX);\n        EXPRESSION_REGEX.lastIndex = 0;\n        return this._processExpression(expression);\n    }\n\n    evaluate() {\n        if (!this._evaluator) {\n            this._evaluator = this._buildEvaluator();\n        }\n\n        return this._evaluator();\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/goat.js","export { Goat } from './src/goat';\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}